(()=>{var e={};e.id=8855,e.ids=[8855],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},73853:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),r(80667),r(9586),r(7629),r(86608);var t=r(23191),s=r(88716),i=r(37922),l=r.n(i),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(a,d);let c=["",{children:["ilan-ver",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80667)),"C:\\Users\\mahsun\\Desktop\\hayvanpazarı.com new\\hayvanpazari\\src\\app\\ilan-ver\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9586)),"C:\\Users\\mahsun\\Desktop\\hayvanpazarı.com new\\hayvanpazari\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\mahsun\\Desktop\\hayvanpazarı.com new\\hayvanpazari\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,86608)),"C:\\Users\\mahsun\\Desktop\\hayvanpazarı.com new\\hayvanpazari\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\mahsun\\Desktop\\hayvanpazarı.com new\\hayvanpazari\\src\\app\\ilan-ver\\page.tsx"],m="/ilan-ver/page",h={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ilan-ver/page",pathname:"/ilan-ver",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},36107:(e,a,r)=>{Promise.resolve().then(r.bind(r,80886))},86333:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},24230:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(62881).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},30361:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(62881).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},80886:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>P,dynamic:()=>M});var t=r(10326),s=r(30058),i=r(15154),l=r(54176),n=r(17577),d=r(35047),c=r(77109),o=r(62881);let m=(0,o.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=(0,o.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),u=(0,o.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=r(42887),p=r(30361),g=r(86333),y=r(77506),b=r(24230),f=r(91664),j=r(41190),v=r(29752);let k=(0,o.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var N=r(94019),w=r(51223);function z({onImagesChange:e,maxImages:a=10,className:r}){let[s,i]=(0,n.useState)([]),[l,d]=(0,n.useState)(!1),[c,o]=(0,n.useState)(0),m=(0,n.useCallback)(async r=>{let t=Array.from(r.target.files||[]);if(t.length+s.length>a){alert(`En fazla ${a} resim y\xfckleyebilirsiniz`);return}let l=t.filter(e=>e.type.startsWith("image/"));if(0===l.length){alert("L\xfctfen ge\xe7erli resim dosyaları se\xe7in");return}let n=l.map(e=>({url:URL.createObjectURL(e),publicId:"",file:e}));i(e=>[...e,...n]),d(!0),o(0);try{let a=[];for(let e=0;e<l.length;e++){let r=l[e],t=new FormData;t.append("file",r),t.append("folder","hayvanpazari/listings");let s=await fetch("/api/upload",{method:"POST",body:t});if(!s.ok)throw Error("Y\xfckleme başarısız");let i=await s.json();a.push({url:i.url,publicId:i.publicId}),o((e+1)/l.length*100)}i(r=>{let t=[...r],s=0;for(let e=0;e<t.length;e++)t[e].file&&s<a.length&&(t[e]={url:a[s].url,publicId:a[s].publicId},s++);return e(t.filter(e=>e.publicId)),t})}catch(e){console.error("Upload error:",e),alert("Resimler y\xfcklenirken bir hata oluştu"),i(e=>e.filter(e=>e.publicId))}finally{d(!1),o(0)}},[s.length,a,e]),h=(0,n.useCallback)(a=>{i(r=>{let t=[...r];return t[a].url.startsWith("blob:")&&URL.revokeObjectURL(t[a].url),t.splice(a,1),e(t.filter(e=>e.publicId)),t})},[e]);return(0,t.jsxs)("div",{className:(0,w.cn)("space-y-4",r),children:[(0,t.jsxs)("div",{className:(0,w.cn)("border-2 border-dashed rounded-xl p-8 text-center transition-colors",l?"border-nature-300 bg-nature-50":"border-earth-300 hover:border-nature-400 hover:bg-earth-50"),children:[t.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:m,disabled:l,className:"hidden",id:"image-upload"}),t.jsx("label",{htmlFor:"image-upload",className:(0,w.cn)("cursor-pointer flex flex-col items-center gap-3",l&&"pointer-events-none"),children:l?(0,t.jsxs)(t.Fragment,{children:[t.jsx(y.Z,{className:"h-10 w-10 text-nature-500 animate-spin"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-nature-600 font-medium",children:"Y\xfckleniyor..."}),t.jsx("div",{className:"w-48 h-2 bg-earth-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-nature-500 transition-all duration-300",style:{width:`${c}%`}})}),(0,t.jsxs)("p",{className:"text-sm text-earth-500",children:["%",Math.round(c)]})]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-earth-100 flex items-center justify-center",children:t.jsx(k,{className:"h-8 w-8 text-earth-500"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-earth-700",children:"Resim y\xfcklemek i\xe7in tıklayın veya s\xfcr\xfckleyin"}),(0,t.jsxs)("p",{className:"text-sm text-earth-500 mt-1",children:["PNG, JPG, WEBP (max. 5MB - ",a," resim)"]})]})]})})]}),s.length>0&&t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden border border-earth-200 group",children:[t.jsx("img",{src:e.url,alt:`Preview ${a+1}`,className:"w-full h-full object-cover"}),t.jsx("button",{onClick:()=>h(a),disabled:l,className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",children:t.jsx(N.Z,{className:"h-4 w-4"})}),!e.publicId&&t.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:t.jsx(y.Z,{className:"h-6 w-6 text-white animate-spin"})}),0===a&&e.publicId&&t.jsx("span",{className:"absolute bottom-2 left-2 px-2 py-0.5 bg-nature-500 text-white text-xs rounded-full",children:"Kapak"})]},a))}),s.length>0&&t.jsx("p",{className:"text-sm text-earth-500",children:"İlk resim ilanınızın kapak fotoğrafı olarak kullanılacaktır. S\xfcr\xfckleyerek sıralamayı değiştirebilirsiniz."})]})}let C=[{id:1,title:"Temel Bilgiler",icon:m},{id:2,title:"Kategori & Konum",icon:h},{id:3,title:"Resimler",icon:u},{id:4,title:"İletişim",icon:x.Z}],I=["Adana","Adıyaman","Afyonkarahisar","Ağrı","Aksaray","Amasya","Ankara","Antalya","Ardahan","Artvin","Aydın","Balıkesir","Bartın","Batman","Bayburt","Bilecik","Bing\xf6l","Bitlis","Bolu","Burdur","Bursa","\xc7anakkale","\xc7ankırı","\xc7orum","Denizli","Diyarbakır","D\xfczce","Edirne","Elazığ","Erzincan","Erzurum","Eskişehir","Gaziantep","Giresun","G\xfcm\xfcşhane","Hakkari","Hatay","Iğdır","Isparta","İstanbul","İzmir","Kahramanmaraş","Karab\xfck","Karaman","Kars","Kastamonu","Kayseri","Kilis","Kırıkkale","Kırklareli","Kırşehir","Kocaeli","Konya","K\xfctahya","Malatya","Manisa","Mardin","Mersin","Muğla","Muş","Nevşehir","Niğde","Ordu","Osmaniye","Rize","Sakarya","Samsun","Şanlıurfa","Siirt","Sinop","Şırnak","Sivas","Tekirdağ","Tokat","Trabzon","Tunceli","Uşak","Van","Yalova","Yozgat","Zonguldak"];function A(){let e=(0,d.useRouter)(),{data:a,status:r}=(0,c.useSession)(),[s,i]=(0,n.useState)(1),[l,o]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]),[u,x]=(0,n.useState)(""),[k,N]=(0,n.useState)({title:"",description:"",price:"",categoryId:"",subcategoryId:"",city:"",district:"",images:[],phone:"",features:[]});if("unauthenticated"===r)return e.push("/giris?callbackUrl=/ilan-ver"),null;let w=(e,a)=>{N(r=>({...r,[e]:a})),x("")},A=()=>{switch(s){case 1:if(!k.title.trim()||k.title.length<10)return x("Başlık en az 10 karakter olmalıdır"),!1;if(!k.description.trim()||k.description.length<50)return x("A\xe7ıklama en az 50 karakter olmalıdır"),!1;if(!k.price||0>=parseFloat(k.price))return x("Ge\xe7erli bir fiyat girin"),!1;return!0;case 2:if(!k.categoryId)return x("Kategori se\xe7in"),!1;if(!k.city)return x("Şehir se\xe7in"),!1;return!0;case 3:if(0===k.images.length)return x("En az bir resim y\xfckleyin"),!1;return!0;case 4:if(!k.phone||k.phone.length<10)return x("Ge\xe7erli bir telefon numarası girin"),!1;return!0;default:return!0}},M=async()=>{if(A()){o(!0);try{let a=await fetch("/api/listings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...k,price:parseFloat(k.price),images:k.images.map(e=>e.url)})}),r=await a.json();if(!a.ok)throw Error(r.error||"Bir hata oluştu");e.push("/profil/ilanlarim")}catch(e){x(e.message)}finally{o(!1)}}},P=m.find(e=>e.id===k.categoryId);return(0,t.jsxs)(v.Card,{className:"max-w-3xl mx-auto",children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("div",{className:"flex items-center justify-between",children:C.map((e,a)=>{let r=e.icon,i=e.id===s,l=e.id<s;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:`flex flex-col items-center ${i?"text-nature-600":l?"text-green-600":"text-earth-400"}`,children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${i?"border-nature-600 bg-nature-50":l?"border-green-600 bg-green-50":"border-earth-300"}`,children:l?t.jsx(p.Z,{className:"h-5 w-5"}):t.jsx(r,{className:"h-5 w-5"})}),t.jsx("span",{className:"text-xs mt-1 font-medium hidden sm:block",children:e.title})]}),a<C.length-1&&t.jsx("div",{className:`w-12 sm:w-20 h-0.5 mx-2 ${l?"bg-green-600":"bg-earth-200"}`})]},e.id)})})}),(0,t.jsxs)("div",{className:"p-6 min-h-[400px]",children:[u&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:u}),1===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"İlan Başlığı *"}),t.jsx(j.I,{value:k.title,onChange:e=>w("title",e.target.value),placeholder:"\xd6rn: 2 Yaşında Holstein Dana",maxLength:100}),(0,t.jsxs)("p",{className:"text-xs text-earth-500 mt-1",children:[k.title.length,"/100 karakter"]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"A\xe7ıklama *"}),t.jsx("textarea",{value:k.description,onChange:e=>w("description",e.target.value),placeholder:"Hayvanınızın \xf6zelliklerini, sağlık durumunu ve diğer detayları yazın...",rows:6,className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-nature-500"}),(0,t.jsxs)("p",{className:"text-xs text-earth-500 mt-1",children:["En az 50 karakter (",k.description.length," karakter)"]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Fiyat (TL) *"}),t.jsx(j.I,{type:"number",value:k.price,onChange:e=>w("price",e.target.value),placeholder:"15000",min:0})]})]}),2===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Kategori *"}),(0,t.jsxs)("select",{value:k.categoryId,onChange:e=>{w("categoryId",e.target.value),w("subcategoryId","")},className:"w-full h-10 px-3 border border-input rounded-md",children:[t.jsx("option",{value:"",children:"Kategori se\xe7in"}),m.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),P?.subcategories.length>0&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Alt Kategori"}),(0,t.jsxs)("select",{value:k.subcategoryId,onChange:e=>w("subcategoryId",e.target.value),className:"w-full h-10 px-3 border border-input rounded-md",children:[t.jsx("option",{value:"",children:"Alt kategori se\xe7in"}),P.subcategories.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Şehir *"}),(0,t.jsxs)("select",{value:k.city,onChange:e=>w("city",e.target.value),className:"w-full h-10 px-3 border border-input rounded-md",children:[t.jsx("option",{value:"",children:"Şehir se\xe7in"}),I.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"İl\xe7e"}),t.jsx(j.I,{value:k.district,onChange:e=>w("district",e.target.value),placeholder:"İl\xe7e"})]})]})]}),3===s&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-4",children:"İlan Resimleri *"}),t.jsx(z,{onImagesChange:e=>w("images",e),maxImages:10})]}),4===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Telefon Numarası *"}),t.jsx(j.I,{value:k.phone,onChange:e=>w("phone",e.target.value),placeholder:"0555 123 4567",type:"tel"}),t.jsx("p",{className:"text-sm text-earth-500 mt-1",children:"İlanınızda g\xf6r\xfcnecek iletişim numarası"})]}),(0,t.jsxs)("div",{className:"bg-earth-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-earth-800 mb-2",children:"İlan \xd6zeti"}),(0,t.jsxs)("ul",{className:"text-sm text-earth-600 space-y-1",children:[(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Başlık:"})," ",k.title]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Fiyat:"})," ",parseFloat(k.price).toLocaleString("tr-TR")," TL"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Kategori:"})," ",P?.name]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Konum:"})," ",k.city,k.district?`, ${k.district}`:""]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Resim:"})," ",k.images.length," adet"]})]})]}),t.jsx("p",{className:"text-sm text-earth-500",children:"İlanınızı yayınladığınızda admin onayına g\xf6nderilecektir. Onay s\xfcreci genellikle 24 saat i\xe7inde tamamlanır."})]})]}),(0,t.jsxs)("div",{className:"p-6 border-t flex justify-between",children:[(0,t.jsxs)(f.Button,{variant:"outline",onClick:()=>{i(e=>Math.max(e-1,1)),x("")},disabled:1===s||l,children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Geri"]}),s===C.length?t.jsx(f.Button,{onClick:M,disabled:l,className:"gradient-nature text-white",children:l?(0,t.jsxs)(t.Fragment,{children:[t.jsx(y.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"G\xf6nderiliyor..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"İlanı Yayınla"]})}):(0,t.jsxs)(f.Button,{onClick:()=>{A()&&i(e=>Math.min(e+1,C.length))},className:"gradient-nature text-white",children:["Devam",t.jsx(b.Z,{className:"h-4 w-4 ml-2"})]})]})]})}let M="force-dynamic";function P(){return(0,t.jsxs)("main",{className:"min-h-screen bg-earth-50/30",children:[t.jsx(i.Navbar,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto mb-10",children:[t.jsx("h1",{className:"text-3xl font-bold text-earth-800 mb-3",children:"\xdccretsiz İlan Ver"}),t.jsx("p",{className:"text-earth-500",children:"Hayvanınızı veya \xfcr\xfcn\xfcn\xfcz\xfc dakikalar i\xe7inde binlerce alıcıya ulaştırın."})]}),t.jsx(A,{})]}),t.jsx(l.Footer,{})]})}},29752:(e,a,r)=>{"use strict";r.d(a,{Card:()=>l,CardContent:()=>c,CardHeader:()=>n,CardTitle:()=>d});var t=r(10326),s=r(17577),i=r(51223);let l=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("rounded-xl border border-earth-200 bg-white text-earth-950 shadow-card",e),...a}));l.displayName="Card";let n=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let d=s.forwardRef(({className:e,...a},r)=>t.jsx("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle",s.forwardRef(({className:e,...a},r)=>t.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-earth-500",e),...a})).displayName="CardDescription";let c=s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",s.forwardRef(({className:e,...a},r)=>t.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},80667:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>i,dynamic:()=>s});var t=r(68570);let s=(0,t.createProxy)(String.raw`C:\Users\mahsun\Desktop\hayvanpazarı.com new\hayvanpazari\src\app\ilan-ver\page.tsx#dynamic`),i=(0,t.createProxy)(String.raw`C:\Users\mahsun\Desktop\hayvanpazarı.com new\hayvanpazari\src\app\ilan-ver\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[9276,8242,58,5626],()=>r(73853));module.exports=t})();