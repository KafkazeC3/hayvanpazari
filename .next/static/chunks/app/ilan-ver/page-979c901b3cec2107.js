(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8855],{6663:function(e,a,t){Promise.resolve().then(t.bind(t,3306))},2660:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6858:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1671:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});let r=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3306:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Z},dynamic:function(){return B}});var r=t(7437),l=t(521),i=t(3266),s=t(1131),n=t(2265),c=t(9376),d=t(605),o=t(9205);let m=(0,o.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=(0,o.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),u=(0,o.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=t(3041),p=t(1671),g=t(2660),f=t(1817),b=t(6858),y=t(2381),j=t(279),k=t(9820);let v=(0,o.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var N=t(2489),w=t(3448);function z(e){let{onImagesChange:a,maxImages:t=10,className:l}=e,[i,s]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(0),h=(0,n.useCallback)(async e=>{let r=Array.from(e.target.files||[]);if(r.length+i.length>t){alert("En fazla ".concat(t," resim y\xfckleyebilirsiniz"));return}let l=r.filter(e=>e.type.startsWith("image/"));if(0===l.length){alert("L\xfctfen ge\xe7erli resim dosyaları se\xe7in");return}let n=l.map(e=>({url:URL.createObjectURL(e),publicId:"",file:e}));s(e=>[...e,...n]),d(!0),m(0);try{let e=[];for(let a=0;a<l.length;a++){let t=l[a],r=new FormData;r.append("file",t),r.append("folder","hayvanpazari/listings");let i=await fetch("/api/upload",{method:"POST",body:r});if(!i.ok)throw Error("Y\xfckleme başarısız");let s=await i.json();e.push({url:s.url,publicId:s.publicId}),m((a+1)/l.length*100)}s(t=>{let r=[...t],l=0;for(let a=0;a<r.length;a++)r[a].file&&l<e.length&&(r[a]={url:e[l].url,publicId:e[l].publicId},l++);return a(r.filter(e=>e.publicId)),r})}catch(e){console.error("Upload error:",e),alert("Resimler y\xfcklenirken bir hata oluştu"),s(e=>e.filter(e=>e.publicId))}finally{d(!1),m(0)}},[i.length,t,a]),u=(0,n.useCallback)(e=>{s(t=>{let r=[...t];return r[e].url.startsWith("blob:")&&URL.revokeObjectURL(r[e].url),r.splice(e,1),a(r.filter(e=>e.publicId)),r})},[a]);return(0,r.jsxs)("div",{className:(0,w.cn)("space-y-4",l),children:[(0,r.jsxs)("div",{className:(0,w.cn)("border-2 border-dashed rounded-xl p-8 text-center transition-colors",c?"border-nature-300 bg-nature-50":"border-earth-300 hover:border-nature-400 hover:bg-earth-50"),children:[(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:h,disabled:c,className:"hidden",id:"image-upload"}),(0,r.jsx)("label",{htmlFor:"image-upload",className:(0,w.cn)("cursor-pointer flex flex-col items-center gap-3",c&&"pointer-events-none"),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"h-10 w-10 text-nature-500 animate-spin"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-nature-600 font-medium",children:"Y\xfckleniyor..."}),(0,r.jsx)("div",{className:"w-48 h-2 bg-earth-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-nature-500 transition-all duration-300",style:{width:"".concat(o,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-earth-500",children:["%",Math.round(o)]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-earth-100 flex items-center justify-center",children:(0,r.jsx)(v,{className:"h-8 w-8 text-earth-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-earth-700",children:"Resim y\xfcklemek i\xe7in tıklayın veya s\xfcr\xfckleyin"}),(0,r.jsxs)("p",{className:"text-sm text-earth-500 mt-1",children:["PNG, JPG, WEBP (max. 5MB - ",t," resim)"]})]})]})})]}),i.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:i.map((e,a)=>(0,r.jsxs)("div",{className:"relative aspect-square rounded-lg overflow-hidden border border-earth-200 group",children:[(0,r.jsx)("img",{src:e.url,alt:"Preview ".concat(a+1),className:"w-full h-full object-cover"}),(0,r.jsx)("button",{onClick:()=>u(a),disabled:c,className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})}),!e.publicId&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"h-6 w-6 text-white animate-spin"})}),0===a&&e.publicId&&(0,r.jsx)("span",{className:"absolute bottom-2 left-2 px-2 py-0.5 bg-nature-500 text-white text-xs rounded-full",children:"Kapak"})]},a))}),i.length>0&&(0,r.jsx)("p",{className:"text-sm text-earth-500",children:"İlk resim ilanınızın kapak fotoğrafı olarak kullanılacaktır. S\xfcr\xfckleyerek sıralamayı değiştirebilirsiniz."})]})}let C=[{id:1,title:"Temel Bilgiler",icon:m},{id:2,title:"Kategori & Konum",icon:h},{id:3,title:"Resimler",icon:u},{id:4,title:"İletişim",icon:x.Z}],I=["Adana","Adıyaman","Afyonkarahisar","Ağrı","Aksaray","Amasya","Ankara","Antalya","Ardahan","Artvin","Aydın","Balıkesir","Bartın","Batman","Bayburt","Bilecik","Bing\xf6l","Bitlis","Bolu","Burdur","Bursa","\xc7anakkale","\xc7ankırı","\xc7orum","Denizli","Diyarbakır","D\xfczce","Edirne","Elazığ","Erzincan","Erzurum","Eskişehir","Gaziantep","Giresun","G\xfcm\xfcşhane","Hakkari","Hatay","Iğdır","Isparta","İstanbul","İzmir","Kahramanmaraş","Karab\xfck","Karaman","Kars","Kastamonu","Kayseri","Kilis","Kırıkkale","Kırklareli","Kırşehir","Kocaeli","Konya","K\xfctahya","Malatya","Manisa","Mardin","Mersin","Muğla","Muş","Nevşehir","Niğde","Ordu","Osmaniye","Rize","Sakarya","Samsun","Şanlıurfa","Siirt","Sinop","Şırnak","Sivas","Tekirdağ","Tokat","Trabzon","Tunceli","Uşak","Van","Yalova","Yozgat","Zonguldak"];function K(){let e=(0,c.useRouter)(),{data:a,status:t}=(0,d.useSession)(),[l,i]=(0,n.useState)(1),[s,o]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]),[u,x]=(0,n.useState)(""),[v,N]=(0,n.useState)({title:"",description:"",price:"",categoryId:"",subcategoryId:"",city:"",district:"",images:[],phone:"",features:[]});if((0,n.useEffect)(()=>{fetch("/api/admin/categories").then(e=>e.json()).then(e=>h(e.categories)).catch(console.error)},[]),"unauthenticated"===t)return e.push("/giris?callbackUrl=/ilan-ver"),null;let w=(e,a)=>{N(t=>({...t,[e]:a})),x("")},K=()=>{switch(l){case 1:if(!v.title.trim()||v.title.length<10)return x("Başlık en az 10 karakter olmalıdır"),!1;if(!v.description.trim()||v.description.length<50)return x("A\xe7ıklama en az 50 karakter olmalıdır"),!1;if(!v.price||0>=parseFloat(v.price))return x("Ge\xe7erli bir fiyat girin"),!1;return!0;case 2:if(!v.categoryId)return x("Kategori se\xe7in"),!1;if(!v.city)return x("Şehir se\xe7in"),!1;return!0;case 3:if(0===v.images.length)return x("En az bir resim y\xfckleyin"),!1;return!0;case 4:if(!v.phone||v.phone.length<10)return x("Ge\xe7erli bir telefon numarası girin"),!1;return!0;default:return!0}},B=async()=>{if(K()){o(!0);try{let a=await fetch("/api/listings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,price:parseFloat(v.price),images:v.images.map(e=>e.url)})}),t=await a.json();if(!a.ok)throw Error(t.error||"Bir hata oluştu");e.push("/profil/ilanlarim")}catch(e){x(e.message)}finally{o(!1)}}},Z=m.find(e=>e.id===v.categoryId);return(0,r.jsxs)(k.Card,{className:"max-w-3xl mx-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:C.map((e,a)=>{let t=e.icon,i=e.id===l,s=e.id<l;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center ".concat(i?"text-nature-600":s?"text-green-600":"text-earth-400"),children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center border-2 ".concat(i?"border-nature-600 bg-nature-50":s?"border-green-600 bg-green-50":"border-earth-300"),children:s?(0,r.jsx)(p.Z,{className:"h-5 w-5"}):(0,r.jsx)(t,{className:"h-5 w-5"})}),(0,r.jsx)("span",{className:"text-xs mt-1 font-medium hidden sm:block",children:e.title})]}),a<C.length-1&&(0,r.jsx)("div",{className:"w-12 sm:w-20 h-0.5 mx-2 ".concat(s?"bg-green-600":"bg-earth-200")})]},e.id)})})}),(0,r.jsxs)("div",{className:"p-6 min-h-[400px]",children:[u&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:u}),1===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"İlan Başlığı *"}),(0,r.jsx)(j.I,{value:v.title,onChange:e=>w("title",e.target.value),placeholder:"\xd6rn: 2 Yaşında Holstein Dana",maxLength:100}),(0,r.jsxs)("p",{className:"text-xs text-earth-500 mt-1",children:[v.title.length,"/100 karakter"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"A\xe7ıklama *"}),(0,r.jsx)("textarea",{value:v.description,onChange:e=>w("description",e.target.value),placeholder:"Hayvanınızın \xf6zelliklerini, sağlık durumunu ve diğer detayları yazın...",rows:6,className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-nature-500"}),(0,r.jsxs)("p",{className:"text-xs text-earth-500 mt-1",children:["En az 50 karakter (",v.description.length," karakter)"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Fiyat (TL) *"}),(0,r.jsx)(j.I,{type:"number",value:v.price,onChange:e=>w("price",e.target.value),placeholder:"15000",min:0})]})]}),2===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Kategori *"}),(0,r.jsxs)("select",{value:v.categoryId,onChange:e=>{w("categoryId",e.target.value),w("subcategoryId","")},className:"w-full h-10 px-3 border border-input rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Kategori se\xe7in"}),m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(null==Z?void 0:Z.subcategories.length)>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Alt Kategori"}),(0,r.jsxs)("select",{value:v.subcategoryId,onChange:e=>w("subcategoryId",e.target.value),className:"w-full h-10 px-3 border border-input rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Alt kategori se\xe7in"}),Z.subcategories.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Şehir *"}),(0,r.jsxs)("select",{value:v.city,onChange:e=>w("city",e.target.value),className:"w-full h-10 px-3 border border-input rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Şehir se\xe7in"}),I.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"İl\xe7e"}),(0,r.jsx)(j.I,{value:v.district,onChange:e=>w("district",e.target.value),placeholder:"İl\xe7e"})]})]})]}),3===l&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-4",children:"İlan Resimleri *"}),(0,r.jsx)(z,{onImagesChange:e=>w("images",e),maxImages:10})]}),4===l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-earth-700 mb-2",children:"Telefon Numarası *"}),(0,r.jsx)(j.I,{value:v.phone,onChange:e=>w("phone",e.target.value),placeholder:"0555 123 4567",type:"tel"}),(0,r.jsx)("p",{className:"text-sm text-earth-500 mt-1",children:"İlanınızda g\xf6r\xfcnecek iletişim numarası"})]}),(0,r.jsxs)("div",{className:"bg-earth-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-earth-800 mb-2",children:"İlan \xd6zeti"}),(0,r.jsxs)("ul",{className:"text-sm text-earth-600 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Başlık:"})," ",v.title]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Fiyat:"})," ",parseFloat(v.price).toLocaleString("tr-TR")," TL"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Kategori:"})," ",null==Z?void 0:Z.name]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Konum:"})," ",v.city,v.district?", ".concat(v.district):""]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Resim:"})," ",v.images.length," adet"]})]})]}),(0,r.jsx)("p",{className:"text-sm text-earth-500",children:"İlanınızı yayınladığınızda admin onayına g\xf6nderilecektir. Onay s\xfcreci genellikle 24 saat i\xe7inde tamamlanır."})]})]}),(0,r.jsxs)("div",{className:"p-6 border-t flex justify-between",children:[(0,r.jsxs)(y.Button,{variant:"outline",onClick:()=>{i(e=>Math.max(e-1,1)),x("")},disabled:1===l||s,children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Geri"]}),l===C.length?(0,r.jsx)(y.Button,{onClick:B,disabled:s,className:"gradient-nature text-white",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"G\xf6nderiliyor..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"İlanı Yayınla"]})}):(0,r.jsxs)(y.Button,{onClick:()=>{K()&&i(e=>Math.min(e+1,C.length))},className:"gradient-nature text-white",children:["Devam",(0,r.jsx)(b.Z,{className:"h-4 w-4 ml-2"})]})]})]})}let B="force-dynamic";function Z(){return(0,r.jsxs)("main",{className:"min-h-screen bg-earth-50/30",children:[(0,r.jsx)(i.Navbar,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-2xl mx-auto mb-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-earth-800 mb-3",children:"\xdccretsiz İlan Ver"}),(0,r.jsx)("p",{className:"text-earth-500",children:"Hayvanınızı veya \xfcr\xfcn\xfcn\xfcz\xfc dakikalar i\xe7inde binlerce alıcıya ulaştırın."})]}),(0,r.jsx)(K,{})]}),(0,r.jsx)(s.Footer,{})]})}},9820:function(e,a,t){"use strict";t.d(a,{Card:function(){return s},CardContent:function(){return d},CardHeader:function(){return n},CardTitle:function(){return c}});var r=t(7437),l=t(2265),i=t(3448);let s=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-xl border border-earth-200 bg-white text-earth-950 shadow-card",t),...l})});s.displayName="Card";let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...l})});n.displayName="CardHeader";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("h3",{ref:a,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-earth-500",t),...l})}).displayName="CardDescription";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...l})});d.displayName="CardContent",l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"}},function(e){e.O(0,[6137,2972,2833,3290,6829,521,5518,2971,2117,1744],function(){return e(e.s=6663)}),_N_E=e.O()}]);